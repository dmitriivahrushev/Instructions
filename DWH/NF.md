# Нормализация и нормальные формы

Нормальная форма — это способ организации таблиц базы данных таким образом, чтобы минимизировать избыточность данных и упростить работу с ними. Проще говоря, нормализация помогает избежать повторений и ошибок при хранении информации.

Приведение таблиц к нормальным формам называется **ДЕКОМПОЗИЦИЕЙ**. Этот процесс заключается в разбиении одной сложной таблицы на несколько простых взаимосвязанных таблиц, чтобы устранить избыточность данных и обеспечить целостность информации.

Процесс обратный нормализации называется ***ДЕНОРМАЛИЗАЦИЕЙ***. Денормализация подразумевает намеренное нарушение правил нормализации ради повышения производительности запросов или упрощения обработки данных.
Денормализация применяется тогда, когда запросы требуют объединения нескольких таблиц (**JOIN’ы**), что снижает производительность системы. Например, иногда выгоднее повторять некоторые данные в разных местах базы данных, чтобы ускорить выборку нужных сведений.  

---

# Всего существует девять нормальных форм:  
Основные — с первой (1NF) по шестую (6NF).  
Дополнительные — нулевая нормальная форма (UNF), нормальная форма Бойса-Кодда (BCNF) и доменно-ключевая нормальная форма (DKNF).  
Реляционные модели обычно делают в форме, близкой к третьей нормальной (3NF), потому что она лучше прочих подходит для хранения данных и построчной обработки. Остальные нормальные формы встречаются в OLTP-моделях реже, но хорошо применимы в OLAP-моделях. 
Таким образом, самая «слабая» форма — 1NF, а самая «сильная» — 6NF. 
![NF](/image/nf_tree.png)

# Первая нормальная форма (1NF) 
- Атомарность атрибутов: каждый столбец таблицы должен содержать атомарное значение, т.е. каждое поле должно хранить единственное значение, не разделенное запятыми или пробелами.  
**Пример неправильной структуры:**
~~~
| student_id | student_name | courses                 |
|------------|--------------|-------------------------|
| STU001     | Иванов И.И.  | Математика, Физика      |
| STU002     | Петров А.А.  | История, Литература     |
| STU003     | Сидорова О.В.| Химия                   |
~~~
Поле **courses** хранит множество значений  Математика, Физика. 
- Отсутствие повторяющихся групп: каждая строка должна быть уникальной, дублирование записей недопустимо.  
**Пример неправильной структуры:**
~~~
| order_id | customer_name | product_code | quantity |
|----------|---------------|--------------|----------|
| ORD001   | Иванов        | P001         | 5        |
| ORD001   | Иванов        | P001         | 5        |
~~~
# Вторая нормальная форма (2NF)
- Модель данных находится в 1NF.
- У всех таблиц модели есть первичный ключ.
- Неключевые поля таблиц зависят только от первичного ключа, а не от какой-то его части(Если он составной)  
- Если первичиный ключ не составной то таблица находится в 2NF.  
**Пример неправильной структуры:**
~~~
| StudentID PK | CourseID PK | TeacherName | ExamDate  |
|--------------|-------------|-------------|-----------|
|     1        | 101         | Иванов И.И. | 2023-06-15|
|     2        | 102         | Петров И.И. | 2023-06-20|
~~~
Поле **TeacherName** зависит от **CourseID**, но не зависит от **StudentID**.
# Третья нормальная форма (3NF)  
- Модель данных находится в 2NF.
- Все неключевые поля таблицы нетранзитивно зависят от ключевого поля.  
**Пример неправильной структуры:**
~~~ 
| SaleID | Brand  | FuelConsumption|
|--------|--------|----------------|
|    1   | Toyota |     7.5        | 
|    2   | BMW    |     8.8        | 
~~~
Расход топлива **FuelConsumption** зависит от марки автомобиля **Brand**, а не напрямую от идентификатора продажи **SaleID**.




